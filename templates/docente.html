<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Panel Docente</title>

  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f0f0f0;
      padding: 50px;
    }

    h2 {
      text-align: center;
    }

    form {
      background: white;
      padding: 20px;
      border-radius: 8px;
      width: 420px;
      margin: auto;
    }

    label {
      font-weight: bold;
    }

    input, select, button {
      width: 100%;
      padding: 10px;
      margin: 6px 0;
    }

    button {
      background-color: #28a745;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    button:hover {
      background-color: #218838;
    }

    .mensaje {
      text-align: center;
      color: red;
      font-weight: bold;
    }
  </style>
</head>

<body>

<h2>Panel Docente – Registro de Calificaciones</h2>

{% with messages = get_flashed_messages(with_categories=true) %}
  {% for category, message in messages %}
    <p class="mensaje">{{ message }}</p>
  {% endfor %}
{% endwith %}

<form method="post">

  <!-- GRADO -->
  <label>Grado:</label>
  <select name="grado" id="grado" required>
    <option value="">Seleccione grado</option>
    {% for grado in grados %}
      <option value="{{ grado }}">{{ grado }}</option>
    {% endfor %}
  </select>

  <!-- MATERIA -->
  <label>Materia:</label>
  <select name="materia_id" id="materia" required>
    <option value="">Seleccione materia</option>
  </select>

  <!-- ALUMNO -->
  <label>Alumno:</label>
  <select name="nombre" id="alumno" required>
    <option value="">Seleccione alumno</option>
  </select>

  <!-- BLOQUE -->
  <label>Bloque:</label>
  <select name="bloque" required>
    <option value="">Seleccione bloque</option>
    <option value="1">Bloque 1</option>
    <option value="2">Bloque 2</option>
    <option value="3">Bloque 3</option>
    <option value="4">Bloque 4</option>
  </select>

  <!-- PUNTAJE -->
  <label>Puntaje:</label>
  <input type="number" name="puntaje" min="0" max="100" step="0.01" required>

  <button type="submit">Registrar Nota</button>

</form>

<br>
<div style="text-align:center;">
  <a href="{{ url_for('logout') }}">Cerrar sesión</a>
</div>

<script>
document.getElementById("grado").addEventListener("change", function () {

  const grado = this.value;
  if (!grado) return;

  fetch(`/docente/datos/${encodeURIComponent(grado)}`)
    .then(res => res.json())
    .then(data => {

      const materiaSelect = document.getElementById("materia");
      const alumnoSelect = document.getElementById("alumno");

      materiaSelect.innerHTML = '<option value="">Seleccione materia</option>';
      alumnoSelect.innerHTML = '<option value="">Seleccione alumno</option>';

      data.materias.forEach(m => {
        materiaSelect.innerHTML += `<option value="${m.id}">${m.nombre}</option>`;
      });

      data.alumnos.forEach(a => {
        alumnoSelect.innerHTML += `<option value="${a.nombre}">${a.nombre}</option>`;
      });
    });
});
</script>

</body>
</html>









