<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Panel Docente</title>

  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f0f0f0;
      padding: 50px;
    }

    h2 {
      text-align: center;
    }

    form {
      background: white;
      padding: 20px;
      border-radius: 8px;
      width: 420px;
      margin: auto;
    }

    label {
      font-weight: bold;
    }

    input, select, button {
      width: 100%;
      padding: 10px;
      margin: 6px 0;
    }

    button {
      background-color: #28a745;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    button:hover {
      background-color: #218838;
    }

    .mensaje {
      text-align: center;
      color: red;
      font-weight: bold;
    }
  </style>
</head>

<body>

<h2>Panel Docente – Registro de Calificaciones</h2>

{% with messages = get_flashed_messages(with_categories=true) %}
  {% for category, message in messages %}
    <p class="mensaje">{{ message }}</p>
  {% endfor %}
{% endwith %}

<form method="post">

  <!-- GRADO (SOLO LOS ASIGNADOS) -->
  <label>Grado:</label>
  <select name="grado" onchange="this.form.submit()" required>
    <option value="">Seleccione grado</option>
    {% for grado in grados %}
      <option value="{{ grado }}"
        {% if request.form.grado == grado %}selected{% endif %}>
        {{ grado }}
      </option>
    {% endfor %}
  </select>

  {% if request.form.grado %}

    <!-- MATERIA (SOLO LAS ASIGNADAS AL GRADO) -->
    <label>Materia:</label>
    <select name="materia_id" required>
      <option value="">Seleccione materia</option>
      {% for materia in materias_por_grado[request.form.grado] %}
        <option value="{{ materia.id }}">
          {{ materia.nombre }}
        </option>
      {% endfor %}
    </select>

    <!-- ALUMNO -->
    <label>Nombre del Alumno:</label>
    <input type="text" name="nombre" placeholder="Nombre del alumno" required>

    <!-- BLOQUE -->
    <label>Bloque:</label>
    <select name="bloque" required>
      <option value="">Seleccione bloque</option>
      <option value="1">Bloque 1</option>
      <option value="2">Bloque 2</option>
      <option value="3">Bloque 3</option>
      <option value="4">Bloque 4</option>
    </select>

    <!-- PUNTAJE -->
    <label>Puntaje:</label>
    <input type="number" name="puntaje" min="0" max="100" step="0.01" required>

    <button type="submit">Registrar Nota</button>

  {% endif %}

</form>

<br>
<div style="text-align:center;">
  <a href="{{ url_for('logout') }}">Cerrar sesión</a>
</div>

</body>
</html>


